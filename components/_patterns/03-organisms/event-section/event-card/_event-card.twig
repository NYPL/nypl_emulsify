{#
 # Variables:
 # - event_card__date__ongoing - Whether or not the event is ongoing.
 # - event_card__date__start - The event's start date.
 # - event_card__date__end - The event's end date.
 # - event_card__heading - The heading of the event.
 # - event_card__status - The status of the event.
 # - event_card__library_name - The library's name.
 # - event_card__tags - An array of tags.
 #
 # Blocks:
 # - event_card__image - Used to replace the image with a responsive one from Drupal.
 #
 # Conditions:
 # - event_card__image - Whether or not to display an image.
 #}

{% set event_date = 'F jS' %}

{% set start_date = event_card__date__start|date('Y/m/d') < 'now'|date('Y/m/d') ? 'Now' : event_card__date__start|date(event_date) %}

{% set event_card__base_class = 'event-card' %}

<div {{ bem(event_card__base_class) }}>
  {% if event_card__image %}
    <div {{ bem('image', [], event_card__base_class) }}>
      {% block event_card__image %}
        {# This part's just for pattern lab. Drupal will replace the whole block #}
        {% include "@atoms/04-images/00-image/responsive-image.twig" with {
          img_srcset: image.four_by_three.responsive.srcset,
          img_sizes: image.four_by_three.responsive.sizes,
          img_src: image.four_by_three.responsive.src,
          img_alt: image.four_by_three.responsive.alt,
        } %}
      {% endblock %}
      {% include "@molecules/date-tile/date-tile.twig" with {
        date_tile__modifiers: ['floated'],
        ongoing: event_card__date__ongoing,
        date_tile__start_date: event_card__date__start,
        date_tile__end_date: event_card__date__end,
      } %}
    </div>
  {% endif %}
  <div {{ bem('content', [], event_card__base_class) }}>
    {% include "@atoms/02-text/00-headings/_heading.twig" with {
      heading_level: '3',
      heading_base_class: 'heading',
      heading_blockname: event_card__base_class,
      heading: event_card__heading,
    } %}
    {% if event_card__status %}
      <div {{ bem('status', [], event_card__base_class) }}>
        {{ event_card__status }}
      </div>
    {% endif %}
    <div {{ bem('date', [], event_card__base_class) }}>
      {{ start_date }} - {{ event_card__date__end|date(event_date) }}
    </div>
    <div {{ bem('library', [], event_card__base_class) }}>
      {{ event_card__library_name }}
    </div>
    <div {{ bem('tags', [], event_card__base_class) }}>
      {% for tag in event_card__tags %}
        <span {{ bem('tag', [], event_card__base_class) }}>{{ tag }}</span>
      {% endfor %}
    </div>
  </div>
</div>
